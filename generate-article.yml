name: Generar Art√≠culo Diario

on:
  # Permite ejecutar este flujo de trabajo manualmente desde la pesta√±a Actions
  workflow_dispatch:

  # Ejecuta el flujo de trabajo todos los d√≠as a las 5 AM UTC
  schedule:
    - cron: '0 5 * * *'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 1. Checkout del repositorio
        uses: actions/checkout@v3

      - name: 2. Configurar Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: 3. Instalar dependencias
        run: npm install

      - name: 4. Ejecutar el script de creaci√≥n de art√≠culos
        run: node create-article.js
        # env:
        #   AI_API_KEY: ${{ secrets.AI_API_KEY }} # As√≠ se usar√≠a un secreto en el futuro

      - name: 5. Hacer commit y push del nuevo art√≠culo
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: 'ü§ñ feat: Nuevo art√≠culo generado autom√°ticamente'
          branch: main # Aseg√∫rate que esta sea tu rama principal (puede ser 'master')
          file_pattern: 'posts/*.md'